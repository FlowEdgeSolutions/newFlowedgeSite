<section id="solutions" class="solutions-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">Unsere Lösungen</h2>
      <p class="section-subtitle">
        Von der Strategie bis zum produktiven Einsatz – wir begleiten Sie auf dem gesamten Weg.
      </p>
    </div>

    <div class="solutions-grid">
      @for (solution of solutions; track solution.title; let i = $index; let isLast = $last; let isFirst = $first) {
        <div class="solution-card">
          <div class="card-icon-wrapper">
            <ng-icon [name]="solution.icon" size="36"></ng-icon>
          </div>
          
          <h3 class="card-title">{{ solution.title }}</h3>
          <p class="card-description">{{ solution.description }}</p>
          
          <ul class="features-list">
            @for (feature of solution.features; track feature) {
              <li class="feature-item">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                  <polyline points="20 6 9 17 4 12"></polyline>
                </svg>
                <span>{{ feature }}</span>
              </li>
            }
          </ul>
          
          <!-- Flow start point rechts (außer letzte Karte) -->
          @if (!isLast) {
            <div class="flow-start-point flow-start-right"></div>
          }
          
          <!-- Flow receive point links (außer erste Karte) -->
          @if (!isFirst) {
            <div class="flow-start-point flow-start-left"></div>
          }
        </div>
        
        <!-- Animated Flow connector -->
        @if (!isLast) {
          <div class="flow-connector">
            <svg viewBox="0 0 120 80" preserveAspectRatio="none" class="flow-svg">
              <defs>
                <linearGradient [id]="'flowGradient' + i" x1="0%" y1="0%" x2="100%" y2="0%">
                  <stop offset="0%" style="stop-color:#6095c6;stop-opacity:0.6" />
                  <stop offset="50%" style="stop-color:#6095c6;stop-opacity:0.9" />
                  <stop offset="100%" style="stop-color:#6095c6;stop-opacity:0.6" />
                </linearGradient>
              </defs>
              
              <!-- Curved flow path -->
              <path [attr.d]="'M 0,40 Q 30,20 60,40 T 120,40'" 
                    [attr.stroke]="'url(#flowGradient' + i + ')'" 
                    stroke-width="2" 
                    fill="none"
                    stroke-linecap="round" />
              
              <!-- Animated particles starting from blue point -->
              <circle r="3" [attr.fill]="'#6095c6'" opacity="0.8">
                <animateMotion 
                  [attr.dur]="'3s'" 
                  repeatCount="indefinite" 
                  [attr.path]="'M 0,40 Q 30,20 60,40 T 120,40'"
                  begin="0s" />
              </circle>
              <circle r="2.5" [attr.fill]="'#10388c'" opacity="0.6">
                <animateMotion 
                  [attr.dur]="'3.5s'" 
                  repeatCount="indefinite" 
                  [attr.path]="'M 0,40 Q 30,20 60,40 T 120,40'"
                  begin="0.5s" />
              </circle>
              <circle r="2" [attr.fill]="'#6095c6'" opacity="0.7">
                <animateMotion 
                  [attr.dur]="'4s'" 
                  repeatCount="indefinite" 
                  [attr.path]="'M 0,40 Q 30,20 60,40 T 120,40'"
                  begin="1s" />
              </circle>
            </svg>
          </div>
        }
      }
    </div>

    <div class="cta-wrapper">
      <button (click)="scrollToContact()" class="cta-button">
        Jetzt Gespräch vereinbaren
      </button>
    </div>
  </div>
</section>
